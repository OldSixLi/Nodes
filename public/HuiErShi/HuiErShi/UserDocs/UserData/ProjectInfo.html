<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>项目信息</title>

  <link href="../../Styles/bootstrap-3.3.4.css" rel="stylesheet">
  <link href="../../Styles/jquery.datetimepicker.css" rel="stylesheet" type="text/css">
  <link href="../../Styles/common.css" rel="stylesheet">
  <style>
   .form-horizontal .control-label {
    text-align: right;
   }
   
   .form-horizontal .form-group {
    margin: 0;
   }
   
   .form-groups {
    margin-bottom: 15px;
   }
   
   .form-group .text-right .control-label {
    line-height: 34px;
   }
   
   legend>label {
    font-size: 18px;
   }
   
   .form-horizontal .form-group:before,
   .form-horizontal .form-group:after {
    display: none;
    /*content: " ";*/
   }
   
   .form-horizontal .form-group:after {
    clear: none;
   }
  </style>
 </head>

 <body ng-app="myApp">

  <div ng-controller="validateCtrl" class="container-fluid">
   <!-- 面包屑导航 -->
   <ol class="breadcrumb col-xs-12" style="border-radius:0;background-color:white;">
    <li><a href="javascript:void(0)">用户数据</a></li>
    <li><a href="javascript:history.back(-1);">项目列表</a></li>
    <li class="active">
     项目详情</li>
   </ol>
   <div class="row">
    <!--页面主体-->
    <div class="col-xs-9 col-xs-offset-1">

    </div>
    <div class="col-xs-9 col-xs-offset-1">
     <form class="form-horizontal w5c-form demo-form" w5c-form-validate="vm.validateOptions" novalidate name="validateForm">
      <!--第一行-->
      <div class="row   form-groups">

       <div class="col-xs-2 text-right">
        <label for="txtProjectName" class="control-label">项目名称：</label>
       </div>
       <div class="form-group">
        <div class="col-xs-4">
         <input type="text" class="form-control" id="txtProjectName" name="name" placeholder="项目名称" required ng-model="vm.data.name">
        </div>
       </div>

       <div class="col-xs-2 text-right">
        <label for="txtProjectItemId" class="control-label">缩写：</label>
       </div>
       <div class="form-group">
        <div class="col-xs-4">
         <input type="text" class="form-control" id="txtProjectItemId" name="itemId" placeholder="缩写" required ng-model="vm.data.itemId">

        </div>
       </div>
      </div>
      <!--第二行-->
      <div class="row form-groups">
       <div class="col-xs-2 text-right">
        <label for="inputPassword3" class="control-label">拼音名：</label>
       </div>
       <div class="form-group">
        <div class="col-xs-4">
         <input type="text" class="form-control" id="txtProjectSpell" name="spell" placeholder="拼音" required ng-model="vm.data.spell">
        </div>
       </div>
       <div class="col-xs-2 text-right">
        <label for="inputPassword3" class="control-label">数据视图：</label>

       </div>
       <div class="col-xs-4">
        <input type="text" class="form-control" id="inputPassword3" placeholder="数据视图" required ng-model="vm.data.inputPassword3">
       </div>
      </div>
      <!--第三行-->
      <div class="row form-groups">
       <div class="col-md-2 col-sm-2 text-right">
        <label for="txtProjectDescription" class="control-label">项目说明：</label>
       </div>
       <div class="form-group">
        <div class="col-md-10  col-sm-10">
         <textarea id="txtProjectDescription" name="description" rows="3" cols="20" class="form-control" required placeholder="项目描述说明" ng-model="vm.data.description"></textarea>
        </div>
       </div>
      </div>
      <!--单选部分-->
      <div class="row">
       <!--数值型-->
       <div class="col-md-12 col-sm-12">
        <fieldset>
         <legend>
          <input id="Radio1" type="radio" name="type" value="1" />
          <label class="control-label">数值型：</label>
         </legend>

         <div class="row form-groups">
          <div class="col-xs-2 text-right">
           <label for="txtMinReference" class="control-label">最小参考值：</label>
          </div>
          <div class="col-xs-4">
           <input type="text" id="txtMinReference" name="minReference" class="form-control" placeholder="最小参考值" ng-model="vm.data.minReference">
          </div>

          <div class="col-xs-2 text-right">
           <label for="inputPassword3" class="control-label">计量单位：</label>
          </div>
          <div class="col-xs-4">
           <input type="text" id="txtUnit" name="unit" class="form-control" placeholder="计量单位" ng-model="vm.data.unit">
          </div>
         </div>

         <div class="row form-groups">
          <div class="col-xs-2 text-right">
           <label for="txtMaxReference" class="control-label">最大参考值：</label>
          </div>
          <div class="col-xs-4">
           <input type="text" id="txtMaxReference" name="maxReference" class="form-control" placeholder="最大参考值" ng-model="vm.data.maxReference">
          </div>

         </div>
        </fieldset>
       </div>
      </div>
      <!--文本型-->
      <div class="row">
       <div class="col-md-12 col-sm-12">
        <fieldset>
         <legend>
          <input id="radio2" type="radio" name="type" value="2" />
          <label class="control-label">文本：</label>
         </legend>

         <div class="row form-groups">
          <div class="col-xs-2 text-right">
           <label for="txtMinInputCount" class="control-label">最少输入数：</label>
          </div>
          <div class="col-xs-4">
           <input type="text" class="form-control" id="txtMinInputCount" name="minInputCount" placeholder="最少输入字符数" ng-model="vm.data.minInputCount">
          </div>

          <div class="col-xs-2 text-right">
           <label for="txtMaxInputCount" class="control-label">最大输入数：</label>
          </div>
          <div class="col-xs-4">
           <input type="text" class="form-control" id="txtMaxInputCount" name="maxInputCount" placeholder="最多输入字符数" ng-model="vm.data.maxInputCount">
          </div>
         </div>
        </fieldset>
       </div>
      </div>
      <!--选择型-->
      <div class=" row">
       <div class="col-md-12 col-sm-12">
        <fieldset>
         <legend>
          <input id="radio3" type="radio" name="type" value="3" />
          <label class="control-label">选择：</label>
         </legend>
         <div class="row form-groups">
          <div class="col-xs-2 text-right">
           <label for="txtSelections" class="control-label">标签：</label>
          </div>
          <div class="col-xs-4">
           <input type="text" class="form-control" id="txtSelections" name="selections" placeholder="请选择标签" ng-model="vm.data.selections">
          </div>
          <div class="col-xs-2 text-right">
           <label for="rdbIsRadio" class="control-label">只许单选：</label>
          </div>
          <div class="col-xs-4">
           <input id="rdbIsRadio" type="radio" name="isRadio" value="0" ng-model="vm.data.isRadio" />是
           <input id="rdbIsRadio" type="radio" name="isRadio" value="1" ng-model="vm.data.isRadio" />否
          </div>
         </div>
        </fieldset>
       </div>
      </div>
      <!--图片型-->
      <div class="row">
       <div class="col-md-12 col-sm-12">
        <fieldset>
         <legend>
          <input id="Radio1" type="radio" name="rdbType" />
          <label class="control-label">图片：</label>
         </legend>
         <div class="row form-groups">
          <div class="col-xs-2 text-right">
           <label for="txtBalance" class="control-label">图片：</label>
          </div>
          <div class="col-xs-4">
           <input type="file" id="txtImage" name="image" ng-model="vm.data.image" />
          </div>
         </div>
        </fieldset>
       </div>
      </div>
      <!--阴阳型-->
      <div class="row">
       <div class="col-md-12 col-sm-12">
        <fieldset>
         <legend>
          <input id="Radio1" type="radio" name="rdbType" />
          <label class="control-label">阴阳：</label>
         </legend>
         <div class="row form-groups">
          <div class="col-xs-2 text-right">
           <label for="txtBalance" class="control-label">阴阳：</label>
          </div>
          <div class="col-xs-4">
           <input type="text" class="form-control" id="txtBalance" name="balance" placeholder="请输入数值">
          </div>
          <div class="col-xs-2">
           <select class="form-control">
            <option value="+">+</option>
            <option value="-">-</option>
          </select>
          </div>
         </div>
        </fieldset>
       </div>
      </div>
      <!--时间型-->
      <div class="row">
       <div class="col-md-12 col-sm-12">
        <fieldset>
         <legend>
          <input id="Radio1" type="radio" name="rdbType" />
          <label class="control-label">时间：</label>
         </legend>
         <div class="row form-groups">
          <div class="col-xs-2 text-right">
           <label for="inputEmail3" class="control-label">时间：</label>
          </div>
          <div class="col-xs-4">
           <input id="txtTime" name="time" class="start_end_time form-control" placeholder="请选择时间">
          </div>
         </div>
         <p>最后修改: {{lastUpdate_userName}}　{{lastUpdate_time}}</p>
        </fieldset>
       </div>
      </div>
      <!--按钮组-->
      <div class="newProjectblock col-md-12 col-sm-12" ng-show="{{isShow}}">
       <div class="col-md-3 col-sm-4 col-md-offset-5 col-sm-offset-4">
        <input type="submit" id="btnNewProject" class="btn btn-block btn-primary" w5c-form-submit="vm.saveinfo($event)" value="创建项目">
       </div>
      </div>
      <div class="editProjectBlock col-md-12 col-sm-12" ng-show="{{!isShow}}">
       <div class="col-md-3 col-sm-3 col-md-offset-3 col-sm-offset-3">
        <input type="button" id="btnDelProject" class="btn btn-block btn-primary" value="删除项目" ng-click="vm.deleteProject()">
       </div>
       <div class="col-md-3 col-sm-3">
        <input type="submit" id="btnSaveProject" class="btn btn-block btn-primary" w5c-form-submit="vm.editinfo($event)" value="保存项目">
       </div>
      </div>
     </form>
    </div>
   </div><br /><br /><br /><br /><br />
  </div>
  <!-- 脚本 -->
  <script type="text/javascript" src="../../Scripts/jquery-1.10.1.js"></script>
  <script type="text/javascript" src="../../Scripts/jquery.datetimepicker.full.min.js"></script>
  <script type="text/javascript" src="../../Scripts/angular.js"></script>
  <script type="text/javascript" src="../../Scripts/bootstrap.js"></script>
  <script type="text/javascript" src="../../Scripts/select2.js"></script>
  <script type="text/javascript" src="../../Scripts/CommonScript.js"></script>
  <script type="text/javascript" src="../../Scripts/w5cValidator.js"></script>
  <script>
   $(function() {
    //初始化时间控件
    $(".start_end_time").datetimepicker();
   });
   (function() {
    var app = angular.module("myApp", ["w5c.validator"]);
    window.app = app;
    app.config(["w5cValidatorProvider", function(w5cValidatorProvider) {
     // 全局配置
     w5cValidatorProvider.config({
      blurTrig: true,
      showError: true,
      removeError: true
     });

     w5cValidatorProvider.setRules({
      name: {
       required: "用户名称不能为空"
      },
      spell: {
       required: "拼音名不能为空"
      },
      itemId: {
       required: "项目缩写不能为空"
      },
      description: {
       required: "项目说明不能为空"
      }
     });
    }]);
    app.controller("validateCtrl", ["$scope", "$http", function($scope, $http) {
     var vm = $scope.vm = {
      showErrorType: "1",
      showDynamicElement: true,
      dynamicName: "dynamicName",
      data: {}
     };
     var request = new UrlSearch(),
      projectId;
     projectId = request.id ? request.id : null;
     if (projectId != null) {
      $scope.isShow = false; //显示修改按钮

      var userid = urlObj.id; //获取当前用户的ID
      var url = BasicUrl + "item/" + projectId;
      $http.get(url).success(function(data) {
       if (data != null && data != "" && data != "null" && data.id) {
        $scope.vm.data = data;
        $scope.vm.data.todo = "TODO";
       } else {
        tool.alert("提示", "不存在此用户！");
       }
      }).error(function(data, header, config, status) {
       //处理响应失败
       tool.alert("提示", "获取用户数据出错！");
       window.history.back(-1); //回退至上一页面
      });

     } else {
      $scope.isShow = true; //显示新增按钮
     }
     vm.saveinfo = function($event) {
      // $(":submit").attr("disabled", true);
      $http({
        method: 'POST',
        url: BasicUrl + "item",
        headers: {
         'Content-Type': 'application/x-www-form-urlencoded'
        },
        data: $("[name='validateForm']").serialize()

       })
       .success(function(data, xhr) {
        if (xhr == 200) {
         //成功操作
         // TODO  保存COOKIE
         window.location.href = "slideHtml.html";
         $scope.vm.data = {};
        }
       }).error(function(response) {
        // alert(response.errorMessage);
        // $(":submit").attr("disabled", false);
       });
     };

     vm.deleteProject = function() {
      //删除按钮操作
      console.log("删除操作");
      $scope.itemId = 0;
     };
     vm.editinfo = function() {
      //修改按钮操作
      console.log("修改按钮操作");
     }
    }]);
   })();
  </script>
  <script>
   //  $(function() {
   //   //初始化时间控件
   //   // $(".start_end_time").datetimepicker();

   //   //加载页面时判断是新增还是编辑
   //   var request = new UrlSearch(),
   //    projectId;
   //   projectId = request.id ? request.id : null;
   //   //根据是否传入参数判断按钮的显示以及数据的加载操作
   //   if (projectId != null) {
   //    //编辑操作
   //    $(".editProjectBlock").removeClass("hidden");
   //    //TODO  接口网址修改
   //    $.getJSON("../../JSON/UserInfo.ashx?id=" + projectId, function(data) {
   //     if (data != null) {
   //      projectInfoApplyData(data); //赋值操作
   //     } else {
   //      alert(" 不存在此项目");
   //      window.location.href ="ProjectList.html";
   //     }
   //    });

   //   } else {
   //    //新增操作
   //    $(".newProjectblock").removeClass("hidden");

   //   }


   //   $(".newProjectblock").click(function() {
   //    $.post("demo_ajax_gethint.asp", {
   //     suggest:"2"
   //    }, function(result) {
   //     if (result) {
   //      alert("添加项目成功");
   //     }
   //    });

   //   });



   //  });
   //  //项目数据赋值
   //  function projectInfoApplyData(data) {
   //   /// <summary>将请求的数据添加到页面中</summary>
   //   /// <param name="data" type="Object">返回的数据</param>

   //   $("#txtProjectName").val(data.name); //项目名称
   //   $('#txtProjectSpell ').val(data.spell); //拼音名
   //   $("#txtProjectItemId").val(data.itemId); //缩写 
   //   $('#projectItemId ').val(data.itemId); //TODO   项目视图
   //   $('#txtProjectDescription ').val(data.description); //项目说明
   //   $("#txtMinInputCount").val(data.minInputCount); //最少输入数
   //   $("#txtMaxInputCount").val(data.txtMaxInputCount); //最大输入数
   //   $("#txtMinReference").val(data.minReference); //最小参考值 
   //   $("#txtMaxReference").val(data.maxReference); //最大参考值
   //   $("#txtUnit").val(data.unit); //项目单位  
   //   $("#txtSelections").val(data.selections); //标签

   //   //TODO   阴阳 数据等赋值


   //  }
  </script>
 </body>

</html>
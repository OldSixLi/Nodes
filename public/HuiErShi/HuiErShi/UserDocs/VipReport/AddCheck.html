<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>验单列表</title>
    <link href="../../Styles/bootstrap-3.3.4.css" rel="stylesheet" type="text/css">
    <link href="../../Styles/jquery.datetimepicker.css" rel="stylesheet" type="text/css">
    <link href="../../Styles/select2.min.css" rel="stylesheet" type="text/css">
    <!-- 个人维护样式库 -->
    <link href="../../Styles/common.css" rel="stylesheet">

    <style>
      .form-inline .form-control {
        width: auto;
      }
      
      .inputlabel {
        line-height: 30px;
      }
      
      .btn.btn-link {
        padding: 0;
      }
      
      .item-class {
        margin: 0;
        padding: 0 10px;
        line-height: 30px;
      }
      
      .item-class:hover {
        background-color: #ddd;
        color: black;
      }
      
      .item-active {
        background-color: #1E90FF;
        color: white;
      }
      
      .item-active:hover {
        background-color: #1E90FF;
        color: white;
      }
      
      .item-list>li {
        margin: 0;
        padding: 0 10px;
      }
      
      .close-link {
        text-decoration: none;
        position: absolute;
        right: 3px;
        top: 0;
      }
      
      .img-block {
        width: 45%;
        margin: 5px 1% 0 1%;
        position: relative;
        display: inline-block;
        /*max-height: 60px;*/
        height: 80px;
        max-height: 80px;
      }
      
      .img-block>img {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>

  <body ng-app="myApp">
    <!--检索项-->
    <div ng-controller="customersCtrl" class="container-fluid myload">
      <!-- 面包屑导航 -->


      <!--图片部分-->
      <!--<div class=" bordered">-->
      <!--<div class="row marginTop5">-->
      <!--<div id="btn-uploader">
      <button type="button" class="btn btn-default btn-sm btn-block" id="pickfiles">上传默认日程背景</button>
    </div>-->
      <!--</div>-->

      <!--</div>-->
      <ol class="breadcrumb col-xs-12" style="border-radius:0;background-color:white;">
        <li><a href="javascript:void(0)">会员报告</a></li>
        <li class="active">验单详情</li>
      </ol>
      <div class="row form-inline container">
        <!--验单列表-->
        <div class="col-md-2 text-center col-md-offset-1" ng-if="!reportId">
          <img src="{{data.picUrl[picIndex]}}" alt="" class="img-responsive img-thumbnail" ng-click="seeDetail(data.picUrl[picIndex])">
          <a class="btn btn-link pull-left" ng-click="prevImage()" ng-show="picIndex>0">上一张</a>
          <span class="btn btn-link" style="color:black;">{{(picIndex+1)+'/'+picNum}}</span>
          <a class="btn btn-link pull-right" ng-click="nextImage()" ng-show="picIndex<(picNum-1)">下一张</a>
        </div>

        <!--上传验单图片-->
        <div class="col-md-2 text-center col-md-offset-1 text-left" ng-if="reportId">
          <!--<img src="{{data.picUrl[picIndex]}}" alt="" class="img-responsive img-thumbnail" ng-click="seeDetail(data.picUrl[picIndex])">
        <a class="btn btn-link pull-left" ng-click="prevImage()" ng-show="picIndex>0">上一张</a>
        <span class="btn btn-link" style="color:black;">{{(picIndex+1)+'/'+picNum}}</span>
        <a class="btn btn-link pull-right" ng-click="nextImage()" ng-show="picIndex<(picNum-1)">下一张</a>-->

          <div id="btn-uploader">
            <button type="button" class="btn btn-primary btn-block" id="pickfiles">上传验单图片</button>
          </div>


          <!--<div id="btn-uploader">
          <button type="button" class="btn btn-default btn-sm btn-block" id="pickfiles">上传默认日程背景</button>
        </div>-->

          <div id="picBlock">
            <!--<div class="img-block">
            <a class="close-link" href="#" title="删除此照片"><b>x </b></a>
            <img src='http://iph.href.lu/140x100?text=文字说明' class='img-responsive' alt='自定义'>
          </div>-->


          </div>
        </div>
        <div class="col-md-9">
          <p>会员姓名：{{data.user.vipName}}　　　　　　性别：{{data.user.gender=="M"?"男":"女"}}　　　　　　手机：{{data.user.vipEntity.mobile}}</p>
          <p>验单评估：
            <input type="radio" name="isValid" value="1" checked ng-model="isuse">有效验单&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="radio" name="isValid" value="0" ng-model="isuse">无效验单</p>
          <div ng-show="isuse>0">

            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  验单名称：
                  <input type="text" name="" value="" class="form-control" placeholder="验单名称" ng-model="data.name"></div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  来源名称：<input type="text" id="reportFrom" name="reportFrom" class="form-control" ng-model="data.reportFrom" placeholder="医院或体检中心名称"></div>
              </div>

            </div>
            <div class="row" style="margin-top:10px;">
              <div class="col-md-4">
                <div class="form-group">
                  验单日期：

                  <input id="txtStartTime" name="minExpiredAt" class="start_end_time form-control" placeholder="开始时间" value="{{data.createAt|date:'yyyy/MM/dd HH:mm:ss'}}">

                </div>
              </div>

            </div>
            <div class="row" style="margin-top:10px;">
              <div class="col-md-4">
                <div class="form-group">
                  报告单号：
                  <input type="text" class="form-control" placeholder="报告单号" id="inspectionNo"></div>
              </div>
              <div class="col-md-4">
                <button type="button" class="btn btn-primary" ng-click="merge()" ng-show="{{!reportId}}">合并报告单</button>&nbsp;&nbsp;
                <button type="button" class="btn btn-primary" ng-click="addNew()">新建报告单</button>
              </div>
            </div>

          </div>
          <div ng-show="isuse==0">
            <p>无效原因：
              <input type="radio" name="reason" ng-model="reason" value="非本人验单">非本人验单&nbsp;&nbsp;
              <input type="radio" name="reason" ng-model="reason" value="验单超三个月期限">验单超三个月期限&nbsp;&nbsp;
              <input type="radio" name="reason" ng-model="reason" value="非可识别验单">非可识别验单&nbsp;&nbsp;</p>
            <div class="col-md-6">
              <button type="button" class="btn btn-primary" ng-click="notUseClick()">保存</button>
            </div>
            <script>
            </script>
          </div>
        </div>
      </div>
      <hr>
      <!--　　　　　　　　　　　　　　　　　　　　　　　　　
　　　　◆　　　　　　◆　　　　　　　◆　　　　　
　　◆◆◆◆◆　◆◆◆　　◆◆◆　◆◆◆◆◆◆　　
　　　　　　　　◆　　　　　　◆　　　◆　　◆　　
　　◆　　　◆　◆　　　　　◆　◆◆◆◆◆◆◆◆　
　　　◆　◆　　◆◆◆◆　◆　　　　　◆　　◆　　
　◆◆◆◆◆◆　◆　◆　　◆◆◆　◆◆◆◆◆◆　　
　　　　◆　　　◆　◆　　　　◆　　　◆　　　　　
　　◆◆◆◆◆　◆　◆　　　　◆　◆◆◆◆◆◆　　
　　　　◆　　　◆　◆　　◆　◆　　　◆　　　　　
　　◆　◆　◆　◆　◆　　　◆　◆◆◆◆◆◆◆◆　
　◆　　◆　　◆　　◆　　　◆◆　　　◆　　　　　
　　　◆◆　◆　　　◆　　◆　　◆◆◆◆◆◆◆◆　新建报告单-->
      <div class="row">
        <!-- 左边 -->
        <div class="col-md-2 text-right">
          <label for="" class="control-label" style="line-height:30px;">数据视图:</label> </div>
        <div class="col-md-2">
          <select class="form-control" id="dataView"> 
          <option value="">请选择</option>
          <option ng-repeat="x in options"  value="{{x.id}}">{{x.name}}</option>
          </select>
        </div>
        <div class="col-md-2">
          <button type="button" class="btn btn-primary" ng-click="viewItemAdd()" ng-disabled="HaveOptions.length>0">多项导入数据视图</button>
        </div>
        <!--右边-->
        <div class="col-md-2 text-right">
          <label for="" class="control-label" style="line-height:30px;">项目名称：</label>
        </div>
        <div class="col-md-2">
          <select id="allItem" class="form-control">
          <option ng-repeat="y in Itemoptions"  value="{{y.itemId}}">{{y.name}}</option>
          </select>

          </select>
        </div>
        <div class="col-md-2">
          <button type="button" class="btn btn-primary" ng-click="getSingleItemDetail()">单项导入数据视图</button>
        </div>
      </div>
      <!--第二层-->
      <!--A.	新建报告单：点击“新建报告单”按钮，弹出报告单数据录入界面。
i.	数据视图：下拉列出所有的数据视图，选择某一视图，点击“多项导入数据视图”。编辑页面显示该视图的数据项。
ii.	项目名称：下拉列出所有的项目名称，选择某一项目，点击“单项导入数据项目”。编辑页面添加该项目。
iii.	点击编辑部分的项目名称，在右侧显示项目名称、参考数值（有则显示，没有不显示），以及输入数值或图片上传或文字描述。-->

      <div class="row">
        <div class="col-md-5 col-md-offset-1">
          <div class="panel panel-default">
            <div class="panel-heading">报告单号：{{data.inspectionNo}}</div>
            <div class="panel-body">
              <ul class="item-list" style="padding:0;">
                <!--<li class="item-class" ng-repeat="x in itemList" data-id="{{x.itemId}}" ng-click="getItemDetail(x.itemId)" ng-class="itemClassItemId==x.itemId?'item-active':''" style="display:block;list-style: none;  height: 30px;">{{x.name}} </li>-->
                <li class="item-class" ng-repeat="x in HaveOptions" ng-click="getEditItemDetail(x.item.itemId,x.val,x.id); " value="x.item.itemId" style="display:block;list-style: none;  height: 30px;">{{x.item.name}} <span class="pull-right" style="min-width:100px;">{{x.val}}</span></li>
              </ul>

            </div>
          </div>

        </div>
        <div class="col-md-6">
          <div class="row">
            <div class="col-md-4 text-right"><label for="" class="inputlabel">数据名称:</label></div>
            <div class="col-md-4"><span class="inputlabel">{{itemDetail.name}}</span></div>
            <div class="col-md-4"></div>
          </div>
          <div class="row">
            <div class="col-md-4 text-right"><label for="" class="inputlabel">参考数值:</label></div>
            <div class="col-md-4"><span class="inputlabel">{{ itemDetail.minReference}} <span  ng-if="itemDetail.minReference&&itemDetail.maxReference">~</span>{{itemDetail.maxReference}}
              <span ng-if="itemDetail.minReference||itemDetail.maxReference">{{itemDetail.unit}}</span> </span>
            </div>
            <div class="col-md-4"></div>
          </div>
          <div class="row">
            <div class="col-md-4 text-right"><label for="" class="inputlabel">数值:</label></div>
            <div class="col-md-4"><input class="form-control" type="text" name="" ng-model="itemDetail.value" placeholder="数值"></div>
            <div class="col-md-4"><span class="inputlabel">{{itemDetail.unit}}</span> </div>
          </div>
          <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4" style="margin-top:10px">
              <button type="button" class="btn btn-primary btn-block" ng-click="saveItem()" ng-disabled="(itemDetail.value==null||itemDetail.value=='')||!itemDetail.itemId" ng-show="isEditItem==0">保存项目值</button>
              <button type="button" class="btn btn-primary btn-block" ng-click="editItem()" ng-disabled="(itemDetail.value==null||itemDetail.value=='')||!itemDetail.itemId" ng-show="isEditItem==1">修改项目值</button>
            </div>
            <div class="col-md-4"></div>
          </div>

          <div class="row">
            <!-- 消除外边距 -->
            <!--<div class="col-md-10 col-md-offset-2">
              <div class="panel panel-default" style="margin-top:15px;">
                <div class="panel-heading">已保存项目</div>
                <div class="panel-body" style="padding:0;">
                  <ul class="item-list" style="padding:0;">
                    <li class="item-class" ng-repeat="x in HaveOptions" ng-click="getEditItemDetail(x.item.itemId,x.val,x.id); " value="x.item.itemId" style="display:block;list-style: none;  height: 30px;">{{x.item.name}}</li>
                  </ul>
                </div>
              </div>


            </div>-->
          </div>
        </div>
      </div>
      <!--脚本-->
      <!-- 脚本 -->
      <script type="text/javascript" src="../../Scripts/jquery-1.10.1.js"></script>
      <script type="text/javascript" src="../../Scripts/QiniuCloud/plupload.min.js"></script>
      <script type="text/javascript" src="../../Scripts/QiniuCloud/plupload.full.min.js"></script>
      <script type="text/javascript" src="../../Scripts/QiniuCloud/moxie.js"></script>
      <script type="text/javascript" src="../../Scripts/QiniuCloud/qiniu.min.js"></script>
      <script type="text/javascript" src="../../Scripts/jquery.datetimepicker.full.min.js"></script>
      <script type="text/javascript" src="../../Scripts/angular.js"></script>
      <script type="text/javascript" src="../../Scripts/bootstrap.js"></script>
      <script type="text/javascript" src="../../Scripts/select2.js"></script>
      <script type="text/javascript" src="../../Scripts/CommonScript.js"></script>
      <script type="text/javascript" src="../../Scripts/w5cValidator.js"></script>
      <script type="text/javascript" src="../../Scripts/doc/vipreport/addcheck.js"></script>
      <script type="text/javascript" src="../../Scripts/httpconfig/config.js"></script>
  </body>

</html>
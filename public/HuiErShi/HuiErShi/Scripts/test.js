/*
 * @Author:马少博 (ma.shaobo@qq.com)
 * @Date: 2017年4月7日13:14:19
 * @Last Modified by: 马少博
 * @Last Modified time:2017年4月7日13:14:21
 */
// 　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　
// 　　　　　　◆◆◆　◆◆◆◆　　　　　　　　　　　　　　　　　　　　　　　　　　　　
// 　　　　　◆◆◆◆　　◆◆◆◆◆◆　　　　　◆◆◆◆◆◆◆◆◆◆◆◆◆◆◆◆◆◆　　
// 　　　　　◆◆◆　　　◆◆◆　◆◆◆　　　　　　　◆◆◆　　　　　　　　　◆◆◆　　
// 　　　　　◆◆◆　　　◆◆◆　◆◆◆◆　　　　　　◆◆◆　　　　◆◆◆　　◆◆◆　　
// 　　　　◆◆◆　　　　◆◆◆　　　　　　　　　　　◆◆◆　　　　◆◆◆　◆◆◆　　　
// 　　　　◆◆◆　　　　◆◆◆　　　◆◆◆　　　　◆◆◆　　　　　◆◆　　◆◆◆　　　
// 　　　◆◆◆◆　　　　◆◆◆◆◆◆◆◆◆　　　　◆◆◆◆◆◆◆◆◆◆　　◆◆◆　　　
// 　　　◆◆◆◆◆◆◆◆◆◆◆◆◆　　　　　　　　◆◆◆◆◆◆◆◆◆◆　　◆◆◆　　　
// 　　◆◆◆◆◆◆◆◆◆◆◆◆　　　　　　　　　◆◆◆◆　◆◆◆◆◆◆◆◆◆◆◆◆◆　
// 　◆◆◆◆◆◆　　　　◆◆◆　　　　　　　　　◆◆◆◆　◆◆◆◆◆◆◆◆◆◆◆◆◆　
// 　　　　◆◆◆　　　　　◆◆◆　　　　　　　◆◆◆◆◆　◆◆◆　　　　　　　◆◆◆　
// 　　　　◆◆◆　　　　　◆◆◆　　　　　　　　◆◆◆◆　◆◆◆　　　　　　　◆◆◆　
// 　　　　◆◆◆　　　　　◆◆◆◆　　　　　　　　◆◆◆　◆◆◆◆◆◆◆◆◆◆◆◆◆　
// 　　　　◆◆◆　　　　　　◆◆◆　　　　　　　　◆◆◆◆◆◆◆　　　　　　　◆◆◆　
// 　　　　◆◆◆　　　　　　◆◆◆◆　◆◆◆　　　◆◆◆　◆◆◆　　　　　　　◆◆◆　
// 　　　　◆◆◆　　　　　　　◆◆◆◆◆◆◆　　　◆◆◆　◆◆◆　　　　　　　◆◆◆　
// 　　　　◆◆◆　　　　　　　　◆◆◆◆◆　　　　　　　　　　　　　　　◆◆◆◆◆　　
// 　　　　◆◆◆　　　　　　　　　◆◆◆◆　　　　　　　　　　　　　　　◆◆◆◆　　　
// 　

//全局变量  请求的参数
var params = "";
var app = angular.module('myApp', []);
app.controller('customersCtrl', function(scope, http) {
  //分页方法声明
  var pageing = function(pageindex, params) {
      // 需要修改部分 请求的参数和地址
      var url = BasicUrl + "prescription?" + params + "page=" + pageindex + "&pageNum=10";
      http.get(url).success(function(data) {
        if (data != null && data != "" && data != "null") {
          //修改数组字段名称
          scope.dataLengths = data.content.length > 0;
          if (data.content != null && data.content.length > 0) {
            //赋值操作
            scope.data = data;
            scope.totalPage = data.totalPages; //总页数
            scope.totalRecord = data.totalElements; //总记录数
            scope.title = 'name'; //排序字段
            scope.desc = 0; //排序方式（默认升序）
            //调用生成分页方法
            initPageDiv($("#alreadyPage"), pageindex + 1, data.totalPages, 5, $("#currentPage"),
              function() {
                pageing($("#currentPage").val() - 1, params);
              });
          } else {
            //未获取到信息提示
            tool.alert("提示", "当前条件下未获取到信息!");
          }
        }
      }).error(function(data, status, headers, config) {
        //处理错误  
        tool.alert("提示", "请求出错,请重试!");
      });
    }
    //调用分页方法
  pageing(0, params);
  //↓↓↓↓↓↓↓↓↓↓↓↓↓在此处添加其他方法↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓
});
//全局变量  请求的参数
var params = "";
var app = angular.module('myApp', []);
app.controller('customersCtrl', function($scope, $http) {
  //分页方法声明
  var pageing = function(pageindex, params) {
    // 需要修改部分 请求的参数和地址
    var url = BasicUrl + "prescription?" + params + "page=" + pageindex + "&pageNum=10";
    $http.get(url).success(function(data) {
      if (data != null && data != "" && data != "null") {
        //修改数组字段名称
        $scope.dataLengths = data.content.length > 0;
        if (data.content != null && data.content.length > 0) {
          //赋值操作
          $scope.data = data;
          $scope.totalPage = data.totalPages; //总页数
          $scope.totalRecord = data.totalElements; //总记录数
          $scope.title = 'name'; //排序字段
          $scope.desc = 0; //排序方式（默认升序）
          //调用生成分页方法
          initPageDiv($("#alreadyPage"), pageindex + 1, data.totalPages, 5, $("#currentPage"),
            function() {
              pageing($("#currentPage").val() - 1, params);
            });
        } else {
          //未获取到信息提示
          tool.alert("提示", "当前条件下未获取到信息!");
        }
      }
    }).error(function(data, status, headers, config) {
      //处理错误  
      tool.alert("提示", "请求出错,请重试!");
    });
  }

  //调用分页方法
  pageing(0, params);

  //↓↓↓↓↓↓↓↓↓↓↓↓↓在此处添加其他方法↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓
  //排序方法
  scope.sort = function(ziduan) {
    var classname = '';
    if (scope.desc) {
      classname = 'glyphicon glyphicon-arrow-down';
    } else {
      classname = 'glyphicon glyphicon-arrow-up';
    }
    $("[data-order]").find('span').addClass('glyphicon glyphicon-sort');
    $("[data-order='" + ziduan + "']").find('span').removeClass().addClass(classname);
  }
});

// // 

// ＃〓§〓〓〓〓〓§〓〓〓〓〓〓§〓〓〓〓〓§〓＃ 
// 　　↓　　　　　↓　　　　　　↓　　　　　↓ 
// 　☆★☆　　　☆★☆　　　　☆★☆　　　☆★☆ 
// ☆　祝　☆　☆　你　☆　　☆　幸　☆　☆　福　☆ 
// 　☆★☆　　　☆★☆　　　　☆★☆　　　☆★☆ 
// 　　↓　　　　　↓　　　　　　↓　　　　　↓ 
// 　　※　　　　 ※　　　　　 ※　　　　  ※ 




//  /'　\\　　 //\\ 
// 　　　\\　 //　`\ 
// 　　　 \\ //           祝你：
// 　　　.-'^'-. 
// 　　.' a___a `.           春节愉快 合家欢乐！
// 　 ==　(___)　== 
// 　　'. ._I_. .'           心想事成 红包拿来！
// ____/.`-----'.\____ 
//    [###(__)####     
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　

// 　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　
// 　　　　　　　　　　　　　　　◆◆　　　　　　　◆◆◆　　　　　　　　　　　　　　　
// 　　　　　　　　◆◆◆◆◆◆◆◆◆◆　　　　　　◆◆◆　　　◆◆◆◆◆◆◆◆　　　　
// 　　◆◆◆◆◆◆◆◆◆◆◆◆◆　◆◆　　　　　　◆◆◆　　　◆◆◆　　◆◆◆　　　　
// 　　　　　　　　　◆◆◆　　　　　　　　　　　　◆◆◆　　　◆◆◆　　◆◆◆　　　　
// 　　　　　　　　　◆◆◆　　　　　　　　　◆◆◆◆◆◆◆◆◆◆◆◆　　◆◆◆　　　　
// 　　　　　　　　　◆◆◆　　　　　　　　　　　　◆◆◆　　　◆◆◆　　◆◆◆　　　　
// 　　　◆◆◆◆◆◆◆◆◆◆◆◆◆◆◆　　　　　　◆◆◆　　　◆◆◆　　◆◆◆　　　　
// 　　　　　　　　　◆◆◆　　　　　　　　　　　◆◆◆◆　　　◆◆◆　　◆◆◆　　　　
// 　　　　　　　　　◆◆◆　　　　　　　　　　　◆◆◆◆◆◆　◆◆◆　　◆◆◆　　　　
// 　　　　　　　　　◆◆◆　　　　　　　　　　　◆◆◆◆◆◆◆◆◆◆　　◆◆◆　　　　
// 　◆◆◆◆◆◆◆◆◆◆◆◆◆◆◆◆◆◆◆　　◆◆◆◆◆◆◆◆◆◆◆　　◆◆◆　　　　
// 　　　　　　　　　◆◆◆　　　　　　　　　　◆◆◆◆◆　　　◆◆◆　　◆◆◆　　　　
// 　　　　　　　　　◆◆◆　　　　　　　　　◆◆◆◆◆◆　　　◆◆◆　　◆◆◆　　　　
// 　　　　　　　　　◆◆◆　　　　　　　　　　◆◆◆◆◆　　◆◆◆　　　◆◆◆　　　　
// 　　　　　　　　　◆◆◆　　　　　　　　　　　　◆◆◆　　◆◆◆　　　◆◆◆◆◆　　
// 　　　　　　　　　◆◆◆　　　　　　　　　　　　◆◆◆　◆◆◆◆　　　◆◆◆◆◆◆　
// 　　　　　　　◆◆◆◆◆　　　　　　　　　　　　◆◆◆◆◆◆◆　　　　◆◆◆◆◆◆　
// 　　　　　　　◆◆◆◆　　　　　　　　　　　　　◆◆◆　◆◆　　　　　　　　　　　　
// 　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　


//       ******       ******
//     **********   **********
//   ************* *************
//  *****************************
//  *****************************
//  *****************************
//   ***************************
//     ***********************
//       *******************
//         ***************
//           ***********
//             *******
//               ***
// //                *
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；◆◆◆◆◆◆◆◆◆；；；；；；；；；；；；；；；；；；；；；◆◆◆◆◆◆◆；；；；；；；；；；；；；
// ；；；；；；；；；；◆◆◆◆◆◆◆◆；；；；；；；；；；；；；；；；；；；；；◆◆◆◆◆◆◆◆◆◆◆◆；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；；；；；；；；；◆◆◆◆◆；；；◆◆◆◆◆；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；；；；；；；；◆◆◆◆；；；；；；◆◆◆◆；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；；；；；；；；◆◆◆；；；；；；；；◆◆◆；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；；；；；；；；◆◆◆；；；；；；；；；◆◆；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；；；；；；；；；◆◆◆；；；；；；；；◆◆；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；；；；；；；；；◆◆◆◆◆；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；；；；；；；；；；◆◆◆◆◆◆◆◆；；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；；；；；；；；；；；；◆◆◆◆◆◆◆◆；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；◆◆◆◆◆；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；◆◆◆◆；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；；；；；；；；◆◆；；；；；；；；；◆◆◆；；；；；；；；；
// ；；；；；；◆◆◆；；；；◆◆；；；；；；；；；；；；；；；；；；；；；；◆◆；；；；；；；；；◆◆◆；；；；；；；；；
// ；；；；；◆◆◆◆；；；◆◆◆；；；；；；；；；；；；；；；；；；；；；；◆◆◆；；；；；；；；◆◆◆；；；；；；；；；
// ；；；；；◆◆◆◆；；；◆◆◆；；；；；；；；；；；；；；；；；；；；；；◆◆◆◆；；；；；；◆◆◆◆；；；；；；；；；
// ；；；；；；◆◆◆◆◆◆◆◆◆；；；；；；；；；；；；；；；；；；；；；；◆◆◆◆◆◆◆◆◆◆◆◆◆；；；；；；；；；；
// ；；；；；；；◆◆◆◆◆◆；；；；；；；；；；；；；；；；；；；；；；；；◆◆◆◆◆◆◆◆◆◆◆◆；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；◆◆◆；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；

//                   ,;,,;
//                  ,;;'(    马  
//        __      ,;;' ' \   ┇
//     /'  '\'~~'~' \ /'\.)  到 
//  ,;(      )    /  |.      ┇
// ,;' \    /-.,,(   ) \     成
//      ) /       ) / )|     ┇ 
//      ||        ||  \)     功
//      (_\       (_\









// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；◆◆◆◆◆◆◆◆◆；；；；；；；；；；；
// ；；；；；；；；；；◆◆◆◆◆◆◆◆；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆；；；；；；；；；；；；；；；
// ；；；；；；◆◆◆；；；；◆◆；；；；；；；；；；；；；；；
// ；；；；；◆◆◆◆；；；◆◆◆；；；；；；；；；；；；；；；
// ；；；；；◆◆◆◆；；；◆◆◆；；；；；；；；；；；；；；；
// ；；；；；；◆◆◆◆◆◆◆◆◆；；；；；；；；；；；；；；；
// ；；；；；；；◆◆◆◆◆◆；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；◆◆◆◆◆◆◆；；；；；；；；；；；；；
// ；；；；；；；；；◆◆◆◆◆◆◆◆◆◆◆◆；；；；；；；；；
// ；；；；；；；；◆◆◆◆◆；；；◆◆◆◆◆；；；；；；；；；
// ；；；；；；；◆◆◆◆；；；；；；◆◆◆◆；；；；；；；；；
// ；；；；；；；◆◆◆；；；；；；；；◆◆◆；；；；；；；；；
// ；；；；；；；◆◆◆；；；；；；；；；◆◆；；；；；；；；；
// ；；；；；；；；◆◆◆；；；；；；；；◆◆；；；；；；；；；
// ；；；；；；；；◆◆◆◆◆；；；；；；；；；；；；；；；；；
// ；；；；；；；；；◆◆◆◆◆◆◆◆；；；；；；；；；；；；；
// ；；；；；；；；；；；◆◆◆◆◆◆◆◆；；；；；；；；；；；
// ；；；；；；；；；；；；；；；◆◆◆◆◆；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；◆◆◆◆；；；；；；；；；
// ；；；；；；；◆◆；；；；；；；；；◆◆◆；；；；；；；；；
// ；；；；；；；◆◆；；；；；；；；；◆◆◆；；；；；；；；；
// ；；；；；；；◆◆◆；；；；；；；；◆◆◆；；；；；；；；；
// ；；；；；；；◆◆◆◆；；；；；；◆◆◆◆；；；；；；；；；
// ；；；；；；；◆◆◆◆◆◆◆◆◆◆◆◆◆；；；；；；；；；；
// ；；；；；；；◆◆◆◆◆◆◆◆◆◆◆◆；；；；；；；；；；；
// ；；；；；；；；；；；；；◆◆◆；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；
// ；；；；；；；；；；；；；；；；；；；；；；；；；；；；；；










//查询按钮
$scope.search = function() {
  var type = $("#selector1").val(); //搜索字段的值
  var name = $("#selector2").val(); //搜索字段的值 
  params = ""; //初始化查询条件

  if (!(name || type)) {
    tool.alert("提示", "请至少输入一个搜索条件");
    return false;
  }
  params = "";
  if (type) {
    params = "prescriptionType=" + type + "&";
  }
  if (name) {
    params += "name=" + name + "&";
  }
  pageing(0, params);
}

//跳转至某页方法
$scope.skip = function() {
  if ($scope.toPageValue <= 1) {
    $scope.toPageValue = 1;
  } else if ($scope.toPageValue > $scope.totalPage) {
    $scope.toPageValue = $scope.totalPage;
  }
  pageing($scope.toPageValue - 1, params);
}

//排序方法
$scope.sort = function(ziduan) {
  var classname = '';
  if ($scope.desc) {
    classname = 'glyphicon glyphicon-arrow-down';
  } else {
    classname = 'glyphicon glyphicon-arrow-up';
  }
  $("[data-order]").find('span').addClass('glyphicon glyphicon-sort');
  $("[data-order='" + ziduan + "']").find('span').removeClass().addClass(classname);
}